#!/bin/bash

# Copyright (c) 2011 Mick Thomure
# All rights reserved.
#
# Please see the file COPYING in this distribution for usage
# terms.

#
# Stop (not pause) a local job, given the path to its local directory.
#

set -e

if [[ "$#" -lt 1 ]]; then
  echo "usage $0 JOB-DIR [KILL-ARGS]" 1>&2
  exit -1
fi

if [[ ! -f $1/.pgid ]]; then
  echo "Not a job directory" 1>&2
  exit -1
fi

JOB=$1
shift
pkill $@ -g $(cat $JOB/.pgid)

