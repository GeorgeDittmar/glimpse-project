#!/bin/bash

# Copyright (c) 2011 Mick Thomure
# All rights reserved.
#
# Please see the file COPYING in this distribution for usage
# terms.

#
# Make a new directory for a local job. The directory name is composed of the
# current date concatenated with an incremented counter. The new directory is
# created in the current working directory.
#

H=$(hostname -s)
D=$(date +%Y-%m-%d)
N=$H/$D

if [ -e $N ]; then
  for ((F=2; $F<100; F+=1)); do
	T="$N-$F"
	if [ ! -e $T ]; then
	  N=$T
	  F=100
	fi
  done
fi

echo $N
mkdir -p $N

